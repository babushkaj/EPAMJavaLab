{"ast":null,"code":"var _jsxFileName = \"C:\\\\git\\\\laboratory\\\\news-front\\\\src\\\\component\\\\NewsContainer.jsx\";\nimport React from 'react';\nimport NewsCardShort from './NewsCardShort';\nimport NewsDataService from './NewsDataService';\nimport TagDataService from './TagDataService';\n\nclass NewsContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      news: [],\n      allTags: [],\n      howMany: 3,\n      newsAmount: 1,\n      pageNumber: 0,\n      searchString: null\n    };\n  }\n\n  componentDidMount() {\n    this.refreshNews(this.state.pageNumber);\n    this.refreshTags();\n  }\n\n  refreshNews(from) {\n    NewsDataService.getAllNews(from, this.state.howMany).then(response => {\n      this.setState({\n        news: response.data,\n        newsAmount: response.headers['news-amount'],\n        pageNumber: response.headers['page-number'],\n        searchString: response.headers['search-sting']\n      });\n    });\n  }\n\n  refreshTags() {\n    TagDataService.getAllTags(0, 2147483647).then(response => {\n      this.setState({\n        allTags: response.data\n      });\n    });\n  }\n\n  deleteNews(id) {\n    NewsDataService.deleteNews(id).then(response => {\n      this.refreshNews(this.state.pageNumber);\n    });\n  }\n\n  showOneNews(id) {\n    // window.location.href = \"/news/\" + id;\n    this.props.history.push(`/news/` + id);\n  }\n\n  findNews() {\n    let searchString = this.collectSearchDataToSearchString();\n\n    if (searchString) {\n      NewsDataService.findNews(searchString, 0, 20).then(response => {\n        this.setState({\n          news: response.data\n        });\n      });\n    }\n  }\n\n  collectSearchDataToSearchString() {\n    const authorNameCriteriaName = \"author_name\";\n    const authorSurnameCriteriaName = \"author_surname\";\n    const tagCriteriaName = \"tags_name\";\n    let searchAuthorName = document.getElementById(\"searchAuthorNameField\").value;\n    let authorNameSearchCriteria = \"\";\n\n    if (searchAuthorName) {\n      authorNameSearchCriteria = authorNameCriteriaName + \":\" + searchAuthorName;\n    }\n\n    let searchAuthorSurname = document.getElementById(\"searchAuthorSurnameField\").value;\n    let authorSurnameSearchCriteria = \"\";\n\n    if (searchAuthorSurname) {\n      authorSurnameSearchCriteria = authorSurnameCriteriaName + \":\" + searchAuthorSurname;\n    }\n\n    let selectTagFieldValue = document.getElementById(\"tagsSelectField\").childNodes;\n    let selectedTags = [];\n\n    for (var i = 0; i < selectTagFieldValue.length; i++) {\n      if (selectTagFieldValue[i].selected) {\n        selectedTags.push(selectTagFieldValue[i].textContent);\n      }\n    }\n\n    let tagsSearchCriteria = \"\";\n\n    if (selectedTags.length > 0) {\n      tagsSearchCriteria = tagCriteriaName + \":\" + selectedTags[0];\n    }\n\n    for (var j = 1; j < selectedTags.length; j++) {\n      tagsSearchCriteria = tagsSearchCriteria + \",\" + tagCriteriaName + \":\" + selectedTags[j];\n    }\n\n    let searchString = \"\";\n\n    if (authorNameSearchCriteria) {\n      searchString = searchString + authorNameSearchCriteria;\n    }\n\n    if (authorSurnameSearchCriteria) {\n      if (searchString) {\n        searchString = searchString + \",\" + authorSurnameSearchCriteria;\n      } else {\n        searchString = searchString + authorSurnameSearchCriteria;\n      }\n    }\n\n    if (tagsSearchCriteria) {\n      if (searchString) {\n        searchString = searchString + \",\" + tagsSearchCriteria;\n      } else {\n        searchString = searchString + tagsSearchCriteria;\n      }\n    }\n\n    if (searchString) {\n      return \"?search=\" + searchString;\n    } else {\n      return;\n    }\n  }\n\n  cleanSearchFields() {\n    document.getElementById(\"searchAuthorNameField\").value = null;\n    document.getElementById(\"searchAuthorSurnameField\").value = null;\n    let selectTagFieldValue = document.getElementById(\"tagsSelectField\").childNodes;\n\n    for (var i = 0; i < selectTagFieldValue.length; i++) {\n      if (selectTagFieldValue[i].selected) {\n        selectTagFieldValue[i].selected = false;\n      }\n    }\n\n    this.setState({\n      searchString: null\n    });\n    this.refreshNews(this.state.pageNumber);\n  }\n\n  render() {\n    const renderPagination = () => {\n      let pageButtons = [];\n\n      for (let i = 0; i < Math.ceil(this.state.newsAmount / this.state.howMany); i++) {\n        if (i == this.state.pageNumber) {\n          pageButtons.push(React.createElement(\"li\", {\n            className: \"page-item\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }, React.createElement(\"a\", {\n            className: \"page-link text-danger\",\n            href: \"#\",\n            onClick: () => this.refreshNews(i),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }, i + 1)));\n        } else {\n          pageButtons.push(React.createElement(\"li\", {\n            className: \"page-item\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158\n            },\n            __self: this\n          }, React.createElement(\"a\", {\n            className: \"page-link\",\n            href: \"#\",\n            onClick: () => this.refreshNews(i),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158\n            },\n            __self: this\n          }, i + 1)));\n        }\n      }\n\n      return pageButtons;\n    };\n\n    const renderAllTagsList = this.state.allTags.map(t => {\n      return React.createElement(\"option\", {\n        value: t.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, t.name);\n    });\n    const renderNewsCards = this.state.news.map(n => {\n      return React.createElement(NewsCardShort, {\n        newsId: n.id,\n        newsTitle: n.title,\n        newsST: n.shortText,\n        newsCrDate: n.creationDate,\n        newsAuthor: n.author,\n        newsTags: n.tags,\n        deleteClick: () => this.deleteNews(n.id),\n        readClick: () => this.showOneNews(n.id),\n        toNewsListClick: () => this.showNewsList(),\n        deleteClick: () => this.deleteNews(n.id),\n        t: this.props.t,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      });\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row align-items-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group mb-3 w-100 my-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"searchAuthorNameField\",\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: this.props.t(\"new_author_name\"),\n      \"aria-describedby\": \"button-addon2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      id: \"searchAuthorSurnameField\",\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: this.props.t(\"new_author_surname\"),\n      \"aria-describedby\": \"button-addon2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    })), React.createElement(\"select\", {\n      multiple: true,\n      id: \"tagsSelectField\",\n      className: \"form-control\",\n      size: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, renderAllTagsList)), React.createElement(\"div\", {\n      className: \"col-2 align-self-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-outline-primary btn-block\",\n      type: \"button\",\n      id: \"buttonSearch\",\n      onClick: () => this.findNews(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, this.props.t(\"search\")), React.createElement(\"button\", {\n      className: \"btn btn-outline-danger btn-block\",\n      type: \"button\",\n      id: \"buttonSearch\",\n      onClick: () => this.cleanSearchFields(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, this.props.t(\"clean\"))))), renderNewsCards, React.createElement(\"nav\", {\n      \"aria-label\": \"Pagination\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"pagination justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"page-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, this.state.pageNumber == 0 ? React.createElement(\"a\", {\n      className: \"page-link text-muted\",\n      href: \"#\",\n      \"aria-label\": \"Previous\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \"\\xAB\")) : React.createElement(\"a\", {\n      className: \"page-link\",\n      href: \"#\",\n      \"aria-label\": \"Previous\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      onClick: () => this.refreshNews(this.state.pageNumber - 1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"\\xAB\"))), renderPagination(), React.createElement(\"li\", {\n      className: \"page-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"page-link\",\n      href: \"#\",\n      \"aria-label\": \"Next\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, \"\\xBB\")))))), React.createElement(\"div\", {\n      className: \"col-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default NewsContainer;","map":{"version":3,"sources":["C:/git/laboratory/news-front/src/component/NewsContainer.jsx"],"names":["React","NewsCardShort","NewsDataService","TagDataService","NewsContainer","Component","constructor","props","state","news","allTags","howMany","newsAmount","pageNumber","searchString","componentDidMount","refreshNews","refreshTags","from","getAllNews","then","response","setState","data","headers","getAllTags","deleteNews","id","showOneNews","history","push","findNews","collectSearchDataToSearchString","authorNameCriteriaName","authorSurnameCriteriaName","tagCriteriaName","searchAuthorName","document","getElementById","value","authorNameSearchCriteria","searchAuthorSurname","authorSurnameSearchCriteria","selectTagFieldValue","childNodes","selectedTags","i","length","selected","textContent","tagsSearchCriteria","j","cleanSearchFields","render","renderPagination","pageButtons","Math","ceil","renderAllTagsList","map","t","name","renderNewsCards","n","title","shortText","creationDate","author","tags","showNewsList"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport NewsCardShort from './NewsCardShort'\r\nimport NewsDataService from './NewsDataService'\r\nimport TagDataService from './TagDataService'\r\n \r\nclass NewsContainer extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            news: [],\r\n            allTags: [],\r\n            howMany: 3,\r\n            newsAmount: 1,\r\n            pageNumber: 0,\r\n            searchString: null,\r\n\t\t}\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refreshNews(this.state.pageNumber);\r\n        this.refreshTags();\r\n    }\r\n\r\n    refreshNews(from) {\r\n        NewsDataService.getAllNews(from, this.state.howMany)\r\n        .then(\r\n            response => {\r\n                this.setState({news: response.data,  newsAmount: response.headers['news-amount'],\r\n                                pageNumber: response.headers['page-number'], searchString: response.headers['search-sting']});\r\n            }\r\n        )\r\n    }\r\n\r\n    refreshTags(){\r\n        TagDataService.getAllTags(0, 2147483647)\r\n        .then(\r\n            response => {\r\n                this.setState({allTags: response.data, });\r\n            }\r\n        )\r\n    }\r\n\r\n    deleteNews(id) {\r\n        NewsDataService.deleteNews(id)\r\n        .then(\r\n            response => {\r\n                this.refreshNews(this.state.pageNumber);\r\n            }\r\n        )\r\n    }\r\n\r\n    showOneNews(id) {\r\n        // window.location.href = \"/news/\" + id;\r\n        this.props.history.push(`/news/` + id);\r\n    }  \r\n\r\n    findNews(){\r\n        let searchString = this.collectSearchDataToSearchString();\r\n        if(searchString){\r\n            NewsDataService.findNews(searchString, 0, 20)\r\n            .then(\r\n                response => {\r\n                    this.setState({news: response.data})\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n    collectSearchDataToSearchString(){\r\n        const authorNameCriteriaName = \"author_name\";\r\n        const authorSurnameCriteriaName = \"author_surname\";\r\n        const tagCriteriaName = \"tags_name\";\r\n\r\n        let searchAuthorName = document.getElementById(\"searchAuthorNameField\").value;\r\n\r\n        let authorNameSearchCriteria = \"\";\r\n        if(searchAuthorName){\r\n            authorNameSearchCriteria = authorNameCriteriaName + \":\" + searchAuthorName;\r\n        }\r\n\r\n        let searchAuthorSurname = document.getElementById(\"searchAuthorSurnameField\").value;\r\n\r\n        let authorSurnameSearchCriteria = \"\";\r\n        if(searchAuthorSurname){\r\n            authorSurnameSearchCriteria = authorSurnameCriteriaName + \":\" + searchAuthorSurname;\r\n        }\r\n\r\n        let selectTagFieldValue = document.getElementById(\"tagsSelectField\").childNodes; \r\n\r\n        let selectedTags = [];\r\n        for(var i=0; i<selectTagFieldValue.length; i++){\r\n            if(selectTagFieldValue[i].selected){\r\n                selectedTags.push(selectTagFieldValue[i].textContent);\r\n            }\r\n        }\r\n\r\n        let tagsSearchCriteria = \"\";\r\n        if(selectedTags.length > 0){\r\n            tagsSearchCriteria = tagCriteriaName + \":\" + selectedTags[0];\r\n        }\r\n        for(var j=1; j<selectedTags.length; j++){\r\n            tagsSearchCriteria = tagsSearchCriteria + \",\" + tagCriteriaName + \":\" + selectedTags[j];\r\n        }\r\n\r\n        let searchString = \"\";\r\n\r\n        if(authorNameSearchCriteria){\r\n            searchString = searchString + authorNameSearchCriteria;\r\n        }\r\n\r\n        if(authorSurnameSearchCriteria){\r\n            if(searchString){\r\n                searchString = searchString + \",\" + authorSurnameSearchCriteria;\r\n            } else {\r\n                searchString = searchString + authorSurnameSearchCriteria;\r\n            }\r\n        }\r\n\r\n        if(tagsSearchCriteria){\r\n            if(searchString){\r\n                searchString = searchString + \",\" + tagsSearchCriteria;\r\n            } else {\r\n                searchString = searchString + tagsSearchCriteria;\r\n            }\r\n        }\r\n\r\n        if(searchString){\r\n            return \"?search=\" + searchString;\r\n        } else {\r\n            return;\r\n        }\r\n    }\r\n\r\n    cleanSearchFields(){\r\n       document.getElementById(\"searchAuthorNameField\").value = null;\r\n       document.getElementById(\"searchAuthorSurnameField\").value = null;\r\n\r\n       let selectTagFieldValue = document.getElementById(\"tagsSelectField\").childNodes; \r\n        for(var i=0; i<selectTagFieldValue.length; i++){\r\n            if(selectTagFieldValue[i].selected){\r\n                selectTagFieldValue[i].selected = false;\r\n            }\r\n        }   \r\n\r\n        this.setState({searchString: null});\r\n   \r\n       this.refreshNews(this.state.pageNumber);\r\n    }\r\n\r\n    render() {\r\n        const renderPagination = () => {\r\n            let pageButtons = [];\r\n\r\n            for (let i = 0; i < Math.ceil(this.state.newsAmount/this.state.howMany); i++) {\r\n                if(i == this.state.pageNumber){\r\n                    pageButtons.push(<li className=\"page-item\"><a className=\"page-link text-danger\" href=\"#\" onClick={() => this.refreshNews(i)}>{i+1}</a></li>);  \r\n                } else {\r\n                    pageButtons.push(<li className=\"page-item\"><a className=\"page-link\" href=\"#\" onClick={() => this.refreshNews(i)}>{i+1}</a></li>);  \r\n                }\r\n                      \r\n            }\r\n            return pageButtons;\r\n        };\r\n\r\n        const renderAllTagsList = this.state.allTags.map(t => {\r\n            return(\r\n                <option value={t.id}>{t.name}</option>\r\n            )\r\n        })\r\n\r\n        const renderNewsCards = this.state.news.map(n => {\r\n            return(\r\n                <NewsCardShort\r\n                newsId={n.id}\r\n                newsTitle={n.title} \r\n                newsST={n.shortText} \r\n                newsCrDate={n.creationDate} \r\n                newsAuthor={n.author}                \r\n                newsTags={n.tags}\r\n                deleteClick={() => this.deleteNews(n.id)}\r\n                readClick={() => this.showOneNews(n.id)}\r\n                toNewsListClick={() => this.showNewsList()}\r\n                deleteClick={() => this.deleteNews(n.id)}\r\n                t = {this.props.t}\r\n                />\r\n            )\r\n        })  \r\n     \r\n\t\treturn(\r\n            <div>\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-1\"></div>\r\n                        <div className=\"col-10\">\r\n                            <div className=\"container\">\r\n\r\n                                <div className=\"row align-items-center\">\r\n                                    <div className=\"col-10\">\r\n                                        <div className=\"input-group mb-3 w-100 my-3\">\r\n                                            <input id=\"searchAuthorNameField\" type=\"text\" className=\"form-control\" placeholder={this.props.t(\"new_author_name\")} aria-describedby=\"button-addon2\"/>\r\n                                            <input id=\"searchAuthorSurnameField\" type=\"text\" className=\"form-control\" placeholder={this.props.t(\"new_author_surname\")} aria-describedby=\"button-addon2\"/>\r\n                                        </div>\r\n                                        <select multiple id=\"tagsSelectField\" className=\"form-control\" size=\"2\">\r\n                                            {renderAllTagsList}\r\n                                        </select>\r\n                                    </div>\r\n                                    <div className=\"col-2 align-self-center\">\r\n                                        <button className=\"btn btn-outline-primary btn-block\" type=\"button\" id=\"buttonSearch\" onClick={() => this.findNews()}>{this.props.t(\"search\")}</button>\r\n                                        <button className=\"btn btn-outline-danger btn-block\" type=\"button\" id=\"buttonSearch\" onClick={() => this.cleanSearchFields()}>{this.props.t(\"clean\")}</button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                            {renderNewsCards}\r\n\r\n                            <nav aria-label=\"Pagination\">\r\n                                <ul className=\"pagination justify-content-center\">\r\n                                    <li className=\"page-item\">\r\n                                    {this.state.pageNumber == 0 ?\r\n                                        <a className=\"page-link text-muted\" href=\"#\" aria-label=\"Previous\">\r\n                                            <span aria-hidden=\"true\">&laquo;</span>        \r\n                                        </a>\r\n                                    :\r\n                                        <a className=\"page-link\" href=\"#\" aria-label=\"Previous\">\r\n                                            <span aria-hidden=\"true\" onClick = {() => this.refreshNews(this.state.pageNumber - 1)}>&laquo;</span>        \r\n                                        </a>\r\n                                    }\r\n                                    </li>\r\n                                    {renderPagination()}\r\n                                    <li className=\"page-item\">\r\n                                    <a className=\"page-link\" href=\"#\" aria-label=\"Next\">\r\n                                        <span aria-hidden=\"true\">&raquo;</span>\r\n                                    </a>\r\n                                    </li>\r\n                                </ul>\r\n                            </nav>\r\n\r\n                        </div>\r\n                        <div className=\"col-1\"></div>\r\n                    </div>\r\n                </div>\r\n              \r\n            </div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default NewsContainer"]},"metadata":{},"sourceType":"module"}